# External Secrets Operator - Test Environment
# Manages secrets from Google Cloud Secret Manager

# Install External Secrets Operator
installCRDs: true

# Service account configuration
serviceAccount:
  create: true
  name: external-secrets
  annotations:
    # Workload Identity annotation for GCP
    iam.gke.io/gcp-service-account: external-secrets@voyager-test-486811.iam.gserviceaccount.com

# Node selector for tools node pool
nodeSelector:
  cloud.google.com/gke-nodepool: voyager-test-tools-pool

# Controller configuration
controller:
  replicas: 1
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi

# Webhook configuration
webhook:
  replicas: 1
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Cert controller
certController:
  replicas: 1
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 65534

# Pod security context
podSecurityContext:
  fsGroup: 65534
  seccompProfile:
    type: RuntimeDefault

# Note: ClusterSecretStore will be created separately via ArgoCD Application
# or manually after installation
